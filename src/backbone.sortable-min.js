var SortableItemView=Backbone.View.extend({tagName:"li",attributes:{draggable:true},events:{dragstart:"start",dragenter:"enter",dragleave:"leave",dragend:"leave",dragover:"over",drop:"drop"},initialize:function(A){_.extend(this,A)},render:function(){this.$el.html(_.template(this.template,this.model.toJSON()));return this},start:function(){this.parent.draggedModel=this.model},enter:function(){this.$el.addClass(this.overClass)},leave:function(){this.$el.removeClass(this.overClass)},over:function(A){A.preventDefault()},drop:function(){this.leave();var B=this.parent.model;var A=B.models.pop(this.parent.draggedModel);B.models.splice(this.$el.index(),0,A);_.forEach(B.models,function(D,C){D.set(this.orderField,C+1,{silent:true})},this);B.trigger("change")}});var SortableView=Backbone.View.extend({tagName:"ul",orderField:"order",overClass:"over",itemTemplate:"",initialize:function(A){_.extend(this,A);this.model.on("change",this.render,this)},render:function(){this.$el.empty();this.model.sort();_.forEach(this.model.models,this.renderItem,this);return this},renderItem:function(A){this.$el.append(new SortableItemView({model:A,orderField:this.orderField,template:this.itemTemplate,overClass:this.overClass,parent:this}).render().el)}});